<!DOCTYPE html>
<html>
<head>
<title>PadiBuddy</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#5f72be,#9b59b6);
color:white;
text-align:center;
}

/* 3 DOT */
.menu-icon{
position:absolute;
top:15px;
left:15px;
font-size:24px;
cursor:pointer;
display:none;
}

.dropdown{
position:absolute;
top:50px;
left:15px;
background:white;
color:black;
border-radius:8px;
padding:10px;
display:none;
width:170px;
box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

.dropdown button{
width:100%;
margin:5px 0;
background:#6c5ce7;
color:white;
}

/* Card */
.card{
background:rgba(0,0,0,0.2);
padding:25px;
border-radius:15px;
width:400px;
margin:80px auto;
box-shadow:0 8px 20px rgba(0,0,0,0.3);
}

/* Inputs */
input,select{
width:90%;
padding:10px;
margin:8px 0;
border-radius:6px;
border:none;
}

/* Buttons */
button{
padding:8px 15px;
border:none;
border-radius:6px;
cursor:pointer;
background:white;
color:#6c5ce7;
font-weight:bold;
margin:5px;
}

button:hover{
opacity:0.9;
}

.hidden{
display:none;
}

/* Progress */
.progress{
width:60%;
background:white;
border-radius:10px;
margin:15px auto;
height:15px;
}

.progress-bar{
height:100%;
background:#2ecc71;
border-radius:10px;
width:0%;
transition:0.4s;
}

/* Task */
.task{
background:rgba(255,255,255,0.15);
padding:10px;
border-radius:8px;
margin:8px auto;
width:60%;
text-align:left;
}

/* Chat */
.chat-box{
width:70%;
margin:20px auto;
background:rgba(255,255,255,0.1);
padding:15px;
border-radius:10px;
height:300px;
overflow-y:auto;
text-align:left;
}

.user-msg{
text-align:right;
margin:5px;
}

.ai-msg{
text-align:left;
margin:5px;
color:#ffeaa7;
}

</style>
</head>

<body>

<div class="menu-icon" id="menuIcon" onclick="toggleMenu()">‚ãÆ</div>

<div class="dropdown" id="dropdownMenu">
<button onclick="openProfile()">Profile</button>
<button onclick="openAI()">AI Assistance</button>
<button onclick="logout()">Logout</button>
</div>

<!-- REGISTER -->
<div class="card" id="registerBox">
<h2>Register</h2>
<input id="regUser" placeholder="Username">
<input type="password" id="regPass" placeholder="Password">
<input id="regAge" placeholder="Age">
<select id="regGender">
<option value="">Select Gender</option>
<option>Male</option>
<option>Female</option>
</select>
<select id="regStudy">
<option value="">What are you studying?</option>
<option>School</option>
<option>College</option>
<option>Special Course</option>
</select>
<br>
<button onclick="register()">Register</button>
<br>
Already have account?
<button onclick="showLogin()">Login</button>
</div>

<!-- LOGIN -->
<div class="card hidden" id="loginBox">
<h2>Login</h2>
<input id="loginUser" placeholder="Username">
<input type="password" id="loginPass" placeholder="Password">
<br>
<button onclick="login()">Login</button>
<br>
New user?
<button onclick="showRegister()">Register</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" class="hidden">
<h2 id="welcomeText"></h2>
<p id="quoteText"></p>

<input id="taskInput" placeholder="Enter task">
<input type="date" id="deadlineInput">
<br>
<button onclick="addTask()">Add Task</button>

<div class="progress">
<div class="progress-bar" id="progressBar"></div>
</div>

<div id="taskList"></div>

<p>üî• Streak: <span id="streakCount">0</span> days</p>
<button onclick="updateStreak()">Update Streak</button>
</div>

<!-- PROFILE PAGE -->
<div id="profilePage" class="hidden">
<h2>Profile</h2>
<div id="profileContent"></div>
<button onclick="goBack()">Back</button>
</div>

<!-- AI PAGE -->
<div id="aiPage" class="hidden">
<h2>AI Study Assistant</h2>

<div class="chat-box" id="chatBox"></div>

<input id="aiInput" placeholder="Ask something...">
<button onclick="sendAI()">Send</button>
<br>
<button onclick="goBack()">Back</button>
</div>

<script>

const quotes=[
"Focus & Win.",
"Small progress is still progress.",
"Discipline beats motivation.",
"Consistency creates success.",
"You are capable of amazing things."
];

/* MENU */
function toggleMenu(){
dropdownMenu.style.display =
dropdownMenu.style.display==="block"?"none":"block";
}

/* REGISTER */
function register(){
let data={
user:regUser.value,
pass:regPass.value,
age:regAge.value,
gender:regGender.value,
study:regStudy.value,
tasks:[],
streak:0,
lastStreakDate:null
};

localStorage.setItem("padiUser",JSON.stringify(data));
alert("Registered!");
showLogin();
}

/* LOGIN */
function login(){
let saved=JSON.parse(localStorage.getItem("padiUser"));
if(loginUser.value===saved.user &&
loginPass.value===saved.pass){

registerBox.classList.add("hidden");
loginBox.classList.add("hidden");
dashboard.classList.remove("hidden");
menuIcon.style.display="block";

welcomeText.innerText="Welcome "+saved.user;
quoteText.innerText=quotes[Math.floor(Math.random()*quotes.length)];
loadTasks();
streakCount.innerText=saved.streak;

}else{
alert("Wrong credentials");
}
}

/* SWITCH */
function showLogin(){
registerBox.classList.add("hidden");
loginBox.classList.remove("hidden");
}
function showRegister(){
loginBox.classList.add("hidden");
registerBox.classList.remove("hidden");
}

/* TASK */
function addTask(){
let data=JSON.parse(localStorage.getItem("padiUser"));
let text=taskInput.value;
if(!text) return;

data.tasks.push({
text:text,
created:new Date().toLocaleDateString(),
deadline:deadlineInput.value||"No deadline",
done:false
});

localStorage.setItem("padiUser",JSON.stringify(data));
taskInput.value="";
deadlineInput.value="";
loadTasks();
}

function loadTasks(){
let data=JSON.parse(localStorage.getItem("padiUser"));
taskList.innerHTML="";
let done=0;

data.tasks.forEach((t,i)=>{
let div=document.createElement("div");
div.className="task";
div.innerHTML="<b>"+t.text+"</b><br><small>üìÖ "+
t.created+" | ‚è≥ "+t.deadline+"</small>";

let check=document.createElement("input");
check.type="checkbox";
check.checked=t.done;

check.onchange=function(){
data.tasks[i].done=this.checked;
localStorage.setItem("padiUser",JSON.stringify(data));
if(this.checked) alert("Amazing! Keep going üöÄ");
loadTasks();
};

div.appendChild(check);
taskList.appendChild(div);

if(t.done) done++;
});

let percent=data.tasks.length?
(done/data.tasks.length)*100:0;
progressBar.style.width=percent+"%";
}

/* STREAK */
function updateStreak(){
let data=JSON.parse(localStorage.getItem("padiUser"));
let today=new Date().toDateString();

if(data.lastStreakDate===today){
alert("Already updated today!");
return;
}

data.streak++;
data.lastStreakDate=today;
localStorage.setItem("padiUser",JSON.stringify(data));
streakCount.innerText=data.streak;
alert("Streak Updated üî•");
}

/* PROFILE PAGE */
function openProfile(){
dashboard.classList.add("hidden");
aiPage.classList.add("hidden");
profilePage.classList.remove("hidden");

let data=JSON.parse(localStorage.getItem("padiUser"));

profileContent.innerHTML=
"<p><b>Username:</b> "+data.user+"</p>"+
"<p><b>Age:</b> "+data.age+"</p>"+
"<p><b>Gender:</b> "+data.gender+"</p>"+
"<p><b>Studying:</b> "+data.study+"</p>"+
"<p><b>Streak:</b> "+data.streak+" days</p>";
}

/* AI PAGE */
function openAI(){
dashboard.classList.add("hidden");
profilePage.classList.add("hidden");
aiPage.classList.remove("hidden");
}

function sendAI(){
let input=aiInput.value;
if(!input) return;

chatBox.innerHTML+="<div class='user-msg'>"+input+"</div>";

let reply="Stay consistent. Break your task into small goals.";

if(input.toLowerCase().includes("plan"))
reply="Try 45 min focus + 10 min break sessions.";

if(input.toLowerCase().includes("exam"))
reply="Revise daily and solve previous year questions.";

chatBox.innerHTML+="<div class='ai-msg'>"+reply+"</div>";
aiInput.value="";
chatBox.scrollTop=chatBox.scrollHeight;
}

/* BACK */
function goBack(){
profilePage.classList.add("hidden");
aiPage.classList.add("hidden");
dashboard.classList.remove("hidden");
}

/* LOGOUT */
function logout(){
dashboard.classList.add("hidden");
profilePage.classList.add("hidden");
aiPage.classList.add("hidden");
loginBox.classList.remove("hidden");
menuIcon.style.display="none";
dropdownMenu.style.display="none";
}

</script>

</body>
</html>
